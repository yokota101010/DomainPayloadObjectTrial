# DomainPayloadObjectTrial

## コンセプト

UI層とドメイン層の情報受け渡しをDomainPayloadObject（DPO）[^1]方式で行うことを目的に開発したフレームワーク。

### DPO方式のメリット

- バックエンド側
  - DTO方式と比較して値の詰め替えが不要となるので、設計がシンプルになりメモリ消費が小さい。
- フロントエンド側
  - DTO方式などの場合、UI層からドメイン層への情報受け渡しは画面入力を行わないhidden属性のinput項目を考慮しなければいけないが、エンティティの参照を直接連携するDPO方式では不要なので構成がシンプルになる。

### DPO方式のデメリット

- UI層にドメインモデルを公開することになるので、UI層とドメイン層が蜜結合になる可能性がある（例えば、ドメインモデルが変更になったときUIも影響を受けやすくなる）。

[^1]:UIに必要な集約への参照を保持する入れ物（詳しくは参考文献#2#3参照）。

## 制約事項

- ベースとなるフレームワークはSpring＋Thymeleaf。
- DPOに保持する集約の参照は、対象のユースケースで中心となる1個のみとする（1個の集約のコレクションはOK）。つまり、1ユースケースで更新を行える集約は1個。
  - DPOに複数の集約を保持させるのであれば、集約間の結果整合性確保をフレームワークが担保する必要があるが、この役割をフレームワークで担うのは困難な為。
- 中心となる集約と識別子で関連付く集約がUIのレンダリングに必要な場合は、リポジトリを参照専用のコレクションと考えて、直接UI層で使用する。
  - フレームワークが作成を強制するリポジトリサービス（リポジトリの参照を保持する入れ物）をThymeleafから使用可能とする。

## 使用方法

## 設計思想

## 使用例

お仕事マップ
https://github.com/yokota101010/WorkFlowMap

※Eclipse上でDomainPayloadObjectTrialを依存先プロジェクトとして設定することで動作。

## 参考文献
1. 後悔しないためのSpring Boot 入門書：Spring 解体新書（第2版）（田村達也 (著) ）
1. 実践ドメイン駆動設計（ヴォーン・ヴァーノン (著), 高木 正弘 (翻訳) ）
1. 「実践ドメイン駆動設計」から学ぶDDDの実装入門（WINGSプロジェクト 青木淳夫 (著), 山田 祥寛 (監修)）
